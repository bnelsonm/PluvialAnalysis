# PluvialAnalysis
Files and code used to determine which NFIP claims were caused by pluvial flooding. This folder contains (1) the inputs used for the analysis, (2) the code to run the analysis, and (3) outputs from the analysis.

(1) Inputs
	outsideClaims.mat
		NFIP non SFHA claims
		retrieved from https://www.fema.gov/openfema-data-page/fima-nfip-redacted-claims-v2 (web address as of 5/17/2024)
		accessed 11/15/2022
		includes only claims with listed floodZone of B, C, or X
	outsidePolicies.mat
		NFIP non SFHA policies
		retrieved from https://www.fema.gov/openfema-data-page/fima-nfip-redacted-policies-v2 (web address as of 5/17/2024)
		accessed 2/14/2023
		includes only policies with listed floodZone of B, C, or X
	basinShapefiles folder
		USGS Streamgage NHDPlus Watersheds
		retrieved from https://www.sciencebase.gov/catalog/item/631405ccd34e36012efa32dc (web address as of 5/17/2024)
	allUSGSgages.mat
		combined all NHDPlus shapefile information together into a single matlab file
	Streamflows folder
		USGS Streamflows
		retrieved from https://waterdata.usgs.gov/nwis/rt (web address as of 5/17/2024)
		generated by DownloadUSGSStreamflows.m code
	Frequency factor table for log-Pearson III analysis - "KFreqFact_logp.mat"
		retrieved from https://streamflow.engr.oregonstate.edu/analysis/floodfreq/skew.htm (web address as of 5/17/2024)
  
(2) Code
	DownloadUSGSStreamflows.m
		Downloads daily discharge data for all USGS gages from the USGS NHDPlus dataset and stores the streamflow as .txt files
		Input: allGages
		Output: .txt files in Streamflows folder
	LogPearson3Analysis.m
		Performs the Log-Pearson Type III analysis on the daily streamflows for each USGS to determine the date(s) each gage experienced a 100-yr+ discharge event
		Inputs: KFreqFact_logp, Streamflows folder, basinShapefiles folder, allUSGSgages
		Outputs: Q100Final, Q100Gages, keptGages
	FindingClaimsAndPoliciesWithGageInfo.m
		Filters out claims that don't occur inside a USGS gage watershed with flow data for the date of the claim, leaving only claims we can determine if they were caused by a pluvial or 100-yr+ event
		Inputs: outsideClaims, outsidePolicies, keptGages
		Outputs: goodClaims, goodPolicies
	AnalyzingClaims.m
		Analyzes if a claim is due to a pluvial or 100-yr+ event
		Inputs: Q100Gages, Q100Final, goodClaims
		Outputs: analyzedClaims
  
(3) Outputs
	Q100Final.mat
		Final table with discharge 100-yr+ events determined from log-Pearson III analysis
		generated by LogPearson3Analysis.m code
	Q100Gages.mat
		List of all gages with a 100-yr+ event determined from log-Pearson III analysis
		generated by LogPearson3Analysis.m code
	keptGages.mat
		Dataset with all the watershed information for gages with sufficient data to perform this log-Pearson III analysis
		generated by LogPearson3Analysis.m code
	goodClaims.mat
		Dataset with all claims with sufficient information to perform our analysis. These claims occur inside a USGS gage watershed with discharge data for the date of the claim.
		generated by FindingClaimsAndPoliciesWithGageInfo.m code
	goodPolicies.mat
		Dataset with all policies with sufficient information to perform our analysis. These claims occur inside a USGS gage watershed with discharge data for the year the policy was active.
		generated by FindingClaimsAndPoliciesWithGageInfo.m code
	analyzedClaims.mat
		Dataset with a new field, "causedBy100yr", indicating if a claim was due to pluvial flooding (0) or a 100-yr+ event (1)
		generated by AnalyzingClaims.m code
		
